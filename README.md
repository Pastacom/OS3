# ИДЗ №3
*Шиндяпкин Илья Дмитриевич БПИ-219*
## Задание
### Вариант №32
Шайка пиратов под предводительством Джона Сильвера высадилась на берег Острова
Сокровищ. Не смотря на добытую карту старого Флинта, местоположение
сокровищ по-прежнему остается загадкой, поэтому искать
клад приходится практически на ощупь. Так как Сильвер ходит на
деревянной ноге, то самому бродить по джунглям ему не с руки.
Джон Сильвер поделил остров на участки, а пиратов на небольшие группы.
Каждой группе поручается искать клад на нескольких
участках, а сам Сильвер ждет на берегу. Группа пиратов, обшарив
один участок, переходит на следующий, еще необследованный. За
кончив поиски, пираты возвращаются к Сильверу и докладывают
о результатах. Если какая–то из групп находит клад на одном из
своих участков, она возвращается к Сильверу, который шлет попугая,
инициализирующего прекращение (прервыание) всех работ.
Требуется создать приложение, моделирующее действия
Сильвера и пиратов. Сервер — Сильвер, каждая из групп
пиратов — клиент.

## Задача на 4-5.
### Общая схема решаемой задачи:
В качестве капитана в решаемой задачи выступает сервер, а в роли группы пиратов - клиент.

При запуске сервера на указанном порту, также сообщается сколько существует секторов и в каком закопан клад.
Сервер и клиенты общаются по протоколу TCP.

При подключении клиента к серверу, клиент начинает искать клад, обходя еще не иследованные секторы, при этом используется мьютекс
для синхронизации работы нескольких клиентов. После того как клад будет найден, работа все клиентов завершается.

Сервер работает до получение сигнала SIGINT. При завершении работы сервера все клиенты тоже будут остановлены.

Проверкой было подтверждено, что программа соответствует всем критериям, предъявленным на 4-5.
***
### Входные и выходные данные:
При запуске сервера в качестве параметров передается порт для клиентов, количество зон для проверки, зона, где закопано сокровище.

При запуске клиента в качестве параметров передается IP адрес сервера, порт, по которому следует обращаться.

Результаты работы процессов выводятся в консоль.
***
### Тесты:
В этой же директории есть папка с примерами работы программы в виде скриншотов.
***
### Пример компиляции, запуска программы и просмотр результатов:

    $ gcc client.c -o client
    $ gcc server.c -o server -lrt -lpthread

	$ ./server 8000 10 4
    $ ./client 127.0.0.1 8000
***

## Задача на 6-7.
### Общая схема решаемой задачи:
Добавлен клиент-слушатель, который показывает информацию о состоянии секторов.

Для каждого из секторов будет указано одно из значений:
- 0 - неисследованный сектор
- 1 - исследованный сектор
- 2 - сектор, где закопано сокровище

Одновременно можно подключить лишь одного клиента-слушателя. 

В программе сервера добавлена функция для взаимодействия с слушателем.

Слушатель отключается только при получении сигнала SIGINT.

Сервер отключается при получении сигнала SIGINT или отключении слушателя.

Проверкой было подтверждено, что программа соответствует всем критериям, предъявленным на 6-7.
***
### Входные и выходные данные:
При запуске сервера в качестве параметров передается порт для клиентов, порт для слушателя, количество зон для проверки, зона, где закопано сокровище.

При запуске клиента в качестве параметров передается IP адрес сервера, порт, по которому следует обращаться.

При запуске слушателя в качестве параметров передается IP адрес сервера, порт, по которому следует обращаться, а также количество секторов.

Результаты работы процессов выводятся в консоль.
***
### Тесты:
В этой же директории есть папка с примерами работы программы в виде скриншотов.
***
### Пример компиляции, запуска программы и просмотр результатов:

    $ gcc client.c -o client
    $ gcc server.c -o server -lrt -lpthread
    $ gcc listener.c -o listener

	$ ./server 8000 8001 10 4 
    $ ./listener 127.0.0.1 8001 10 
    $ ./client 127.0.0.1 8000
***
*Все прочие требования и особенности идентичны тем, что были на оценку 4-5, и были успешно выполнены.
Программа была протестирована на тестовых данных и показала корректное поведение.*
***

## Задача на 8.
### Общая схема решаемой задачи:
Добавлена возможность подключать множество клиентов-слушателей.

При этом их можно подключать и отключать во время работы других клиентов и сервера, не нарушая их работу.

Слушатель отключается только при получении сигнала SIGINT.

Сервер отключается при получении сигнала SIGINT.

Проверкой было подтверждено, что программа соответствует всем критериям, предъявленным на 8.
***
### Входные и выходные данные:
Входные и выходные данные представлены тем же образом, что и на оценку 6-7.
***
### Тесты:
В этой же директории есть папка с примерами работы программы в виде скриншотов.
***
### Пример компиляции, запуска программы и просмотр результатов:
Компиляция и запуск производится аналогичным способом, как на оценку 6-7.
***
*Все прочие требования и особенности идентичны тем, что были на оценку 6-7, и были успешно выполнены.
Программа была протестирована на тестовых данных и показала корректное поведение.*
***

